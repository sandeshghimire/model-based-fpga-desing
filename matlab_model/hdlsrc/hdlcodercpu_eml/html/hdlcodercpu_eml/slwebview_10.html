<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>hdlcodercpu_eml/CPU_Subsystem_8_bit/Shifter (8-bit)</title></head><link rel="StyleSheet" href="slwebview.css" type="text/css"><script type="text/javascript" src="id_mapping.js"></script><script type="text/javascript" src="slwebview.js"></script><script type="text/javascript" src="slwebview_utils.js"></script><script type="text/javascript" src="slhtmltoolbar.js"></script><body onload="addToolbar('toolbarDiv');if (top) top.emlFileOnload(document);"><table><tr><td><div id="toolbarDiv" style="display:inline"></div></td><td class="content" style="vertical-align:middle">Shifter (8-bit)</td></tr></table><table border="0" cellpadding="4" cellspacing="0"><tr id="LN_1"><td align="right"><pre><a name="1">1</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:1','1')"><span style="color:blue">function</span> [out_flags, shift_out] = Shifter(select, input, in_flags)
</span></pre></td></tr><tr id="LN_2"><td align="right"><pre><a name="2">2</a></pre></td><td align="left"><pre><span><span style="color:green">% An 8-bit shifter:</span>
</span></pre></td></tr><tr id="LN_3"><td align="right"><pre><a name="3">3</a></pre></td><td align="left"><pre><span><span style="color:green">% select = 1 =&gt; shift left by 1 bit</span>
</span></pre></td></tr><tr id="LN_4"><td align="right"><pre><a name="4">4</a></pre></td><td align="left"><pre><span><span style="color:green">% select = 2 =&gt; shift right by 1 bit</span>
</span></pre></td></tr><tr id="LN_5"><td align="right"><pre><a name="5">5</a></pre></td><td align="left"><pre><span><span style="color:green">% otherwise, pass the input</span>
</span></pre></td></tr><tr id="LN_6"><td align="right"><pre><a name="6">6</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_7"><td align="right"><pre><a name="7">7</a></pre></td><td align="left"><pre><span><span style="color:green">% HDL specific fimath</span>
</span></pre></td></tr><tr id="LN_8"><td align="right"><pre><a name="8">8</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:8','8')">hdl_fm = fimath(<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_9"><td align="right"><pre><a name="9">9</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:9','9')"><span style="color:#B20000">'RoundMode'</span>, <span style="color:#B20000">'floor'</span>,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_10"><td align="right"><pre><a name="10">10</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:10','10')"><span style="color:#B20000">'OverflowMode'</span>, <span style="color:#B20000">'wrap'</span>,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_11"><td align="right"><pre><a name="11">11</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:11','11')"><span style="color:#B20000">'ProductMode'</span>, <span style="color:#B20000">'FullPrecision'</span>, <span style="color:#B20000">'ProductWordLength'</span>, 32,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_12"><td align="right"><pre><a name="12">12</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:12','12')"><span style="color:#B20000">'SumMode'</span>, <span style="color:#B20000">'FullPrecision'</span>, <span style="color:#B20000">'SumWordLength'</span>, 32,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_13"><td align="right"><pre><a name="13">13</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:13','13')"><span style="color:#B20000">'CastBeforeSum'</span>, true);
</span></pre></td></tr><tr id="LN_14"><td align="right"><pre><a name="14">14</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_15"><td align="right"><pre><a name="15">15</a></pre></td><td align="left"><pre><span><span style="color:green">% Overflow (V)</span>
</span></pre></td></tr><tr id="LN_16"><td align="right"><pre><a name="16">16</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:16','16')">overflow = bitget(in_flags, 2);
</span></pre></td></tr><tr id="LN_17"><td align="right"><pre><a name="17">17</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_18"><td align="right"><pre><a name="18">18</a></pre></td><td align="left"><pre><span><span style="color:green">% Carry (C)</span>
</span></pre></td></tr><tr id="LN_19"><td align="right"><pre><a name="19">19</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:19','19')">c_out = bitget(in_flags, 4);
</span></pre></td></tr><tr id="LN_20"><td align="right"><pre><a name="20">20</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_21"><td align="right"><pre><a name="21">21</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:21','21')"><span style="color:blue">switch</span>(uint8(select))
</span></pre></td></tr><tr id="LN_22"><td align="right"><pre><a name="22">22</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:22','22')">    <span style="color:blue">case</span> 1,
</span></pre></td></tr><tr id="LN_23"><td align="right"><pre><a name="23">23</a></pre></td><td align="left"><pre><span>        <span style="color:green">% shift left</span>
</span></pre></td></tr><tr id="LN_24"><td align="right"><pre><a name="24">24</a></pre></td><td align="left"><pre><span>        <span style="color:green">% affects C and V as well</span>
</span></pre></td></tr><tr id="LN_25"><td align="right"><pre><a name="25">25</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:25','25')">        shift_out = bitsll(input, 1);
</span></pre></td></tr><tr id="LN_26"><td align="right"><pre><a name="26">26</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Carry (C)</span>
</span></pre></td></tr><tr id="LN_27"><td align="right"><pre><a name="27">27</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:27','27')">        c_out = bitget(input, 8);
</span></pre></td></tr><tr id="LN_28"><td align="right"><pre><a name="28">28</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Overflow (V)</span>
</span></pre></td></tr><tr id="LN_29"><td align="right"><pre><a name="29">29</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:29','29')">        overflow = bitxor(bitget(input, 8), bitget(input, 7));
</span></pre></td></tr><tr id="LN_30"><td align="right"><pre><a name="30">30</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:30','30')">    <span style="color:blue">case</span> 2,
</span></pre></td></tr><tr id="LN_31"><td align="right"><pre><a name="31">31</a></pre></td><td align="left"><pre><span>        <span style="color:green">% shift right</span>
</span></pre></td></tr><tr id="LN_32"><td align="right"><pre><a name="32">32</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:32','32')">        shift_out = bitsra(input, 1);
</span></pre></td></tr><tr id="LN_33"><td align="right"><pre><a name="33">33</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:33','33')">    <span style="color:blue">otherwise</span>,
</span></pre></td></tr><tr id="LN_34"><td align="right"><pre><a name="34">34</a></pre></td><td align="left"><pre><span>        <span style="color:green">% pass the input</span>
</span></pre></td></tr><tr id="LN_35"><td align="right"><pre><a name="35">35</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:35','35')">        shift_out = fi(input, 1, 8, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_36"><td align="right"><pre><a name="36">36</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:36','36')"><span style="color:blue">end</span>
</span></pre></td></tr><tr id="LN_37"><td align="right"><pre><a name="37">37</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_38"><td align="right"><pre><a name="38">38</a></pre></td><td align="left"><pre><span><span style="color:green">% Negativity  (N)</span>
</span></pre></td></tr><tr id="LN_39"><td align="right"><pre><a name="39">39</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:39','39')">sign_bit = getmsb(shift_out); 
</span></pre></td></tr><tr id="LN_40"><td align="right"><pre><a name="40">40</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_41"><td align="right"><pre><a name="41">41</a></pre></td><td align="left"><pre><span><span style="color:green">% Is Zero? (Z)</span>
</span></pre></td></tr><tr id="LN_42"><td align="right"><pre><a name="42">42</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:42','42')">is_zero = uint8(~all(shift_out));
</span></pre></td></tr><tr id="LN_43"><td align="right"><pre><a name="43">43</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:43','43')">zero_ufix1 = fi(is_zero, 0, 1, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_44"><td align="right"><pre><a name="44">44</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_45"><td align="right"><pre><a name="45">45</a></pre></td><td align="left"><pre><span><span style="color:green">% Set [C, N, V, Z] in the flag register</span>
</span></pre></td></tr><tr id="LN_46"><td align="right"><pre><a name="46">46</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:13:1:46','46')">out_flags = bitconcat(bitconcat(bitconcat(c_out, sign_bit), overflow), zero_ufix1);
</span></pre></td></tr><tr id="LN_47"><td align="right"><pre><a name="47">47</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr></table></body></html>