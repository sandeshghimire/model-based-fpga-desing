<html xmlns:mwsh="http://www.mathworks.com/namespace/mcode/v1/syntaxhighlight.dtd"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>hdlcodercpu_eml/CPU_Subsystem_8_bit/Arithmetic Logical Unit (8-bit)</title></head><link rel="StyleSheet" href="slwebview.css" type="text/css"><script type="text/javascript" src="id_mapping.js"></script><script type="text/javascript" src="slwebview.js"></script><script type="text/javascript" src="slwebview_utils.js"></script><script type="text/javascript" src="slhtmltoolbar.js"></script><body onload="addToolbar('toolbarDiv');if (top) top.emlFileOnload(document);"><table><tr><td><div id="toolbarDiv" style="display:inline"></div></td><td class="content" style="vertical-align:middle">Arithmetic Logical Unit (8-bit)</td></tr></table><table border="0" cellpadding="4" cellspacing="0"><tr id="LN_1"><td align="right"><pre><a name="1">1</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:1','1')"><span style="color:blue">function</span> [alu_out, out_flags] = ALU(in_flags, func, alu_in, AC)
</span></pre></td></tr><tr id="LN_2"><td align="right"><pre><a name="2">2</a></pre></td><td align="left"><pre><span><span style="color:green">% This 8-bit ALU supports the following operations:</span>
</span></pre></td></tr><tr id="LN_3"><td align="right"><pre><a name="3">3</a></pre></td><td align="left"><pre><span><span style="color:green">% AND (Logical AND), ADD, SUB, CMA (Complement AC), CMC (Complement Carry) and CLC (Clear Carry)</span>
</span></pre></td></tr><tr id="LN_4"><td align="right"><pre><a name="4">4</a></pre></td><td align="left"><pre><span><span style="color:green">% and appropriately sets a 4-bit flag register, which has the following format:</span>
</span></pre></td></tr><tr id="LN_5"><td align="right"><pre><a name="5">5</a></pre></td><td align="left"><pre><span><span style="color:green">% [C N V Z]</span>
</span></pre></td></tr><tr id="LN_6"><td align="right"><pre><a name="6">6</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_7"><td align="right"><pre><a name="7">7</a></pre></td><td align="left"><pre><span><span style="color:green">% HDL specific fimath</span>
</span></pre></td></tr><tr id="LN_8"><td align="right"><pre><a name="8">8</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:8','8')">hdl_fm = fimath(<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_9"><td align="right"><pre><a name="9">9</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:9','9')"><span style="color:#B20000">'RoundMode'</span>, <span style="color:#B20000">'floor'</span>,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_10"><td align="right"><pre><a name="10">10</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:10','10')"><span style="color:#B20000">'OverflowMode'</span>, <span style="color:#B20000">'wrap'</span>,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_11"><td align="right"><pre><a name="11">11</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:11','11')"><span style="color:#B20000">'ProductMode'</span>, <span style="color:#B20000">'FullPrecision'</span>, <span style="color:#B20000">'ProductWordLength'</span>, 32,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_12"><td align="right"><pre><a name="12">12</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:12','12')"><span style="color:#B20000">'SumMode'</span>, <span style="color:#B20000">'FullPrecision'</span>, <span style="color:#B20000">'SumWordLength'</span>, 32,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_13"><td align="right"><pre><a name="13">13</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:13','13')"><span style="color:#B20000">'CastBeforeSum'</span>, true);
</span></pre></td></tr><tr id="LN_14"><td align="right"><pre><a name="14">14</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_15"><td align="right"><pre><a name="15">15</a></pre></td><td align="left"><pre><span><span style="color:green">% Get the carry in</span>
</span></pre></td></tr><tr id="LN_16"><td align="right"><pre><a name="16">16</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:16','16')">carry = bitget(in_flags, 4); 
</span></pre></td></tr><tr id="LN_17"><td align="right"><pre><a name="17">17</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_18"><td align="right"><pre><a name="18">18</a></pre></td><td align="left"><pre><span><span style="color:green">% Get the overflow in</span>
</span></pre></td></tr><tr id="LN_19"><td align="right"><pre><a name="19">19</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:19','19')">overflow = bitget(in_flags, 2);
</span></pre></td></tr><tr id="LN_20"><td align="right"><pre><a name="20">20</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_21"><td align="right"><pre><a name="21">21</a></pre></td><td align="left"><pre><span><span style="color:green">% Simply pass the AC, when there is no designated func</span>
</span></pre></td></tr><tr id="LN_22"><td align="right"><pre><a name="22">22</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:22','22')">alu_out = fi(AC, 1, 8, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_23"><td align="right"><pre><a name="23">23</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_24"><td align="right"><pre><a name="24">24</a></pre></td><td align="left"><pre><span><span style="color:green">% 3-bit encoding of ALU ops, which can potentially support upto 8 operations</span>
</span></pre></td></tr><tr id="LN_25"><td align="right"><pre><a name="25">25</a></pre></td><td align="left"><pre><span><span style="color:green">% Most of the encodings are unused to comply to Parwan supported ops</span>
</span></pre></td></tr><tr id="LN_26"><td align="right"><pre><a name="26">26</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:26','26')"><span style="color:blue">switch</span>(uint8(func))
</span></pre></td></tr><tr id="LN_27"><td align="right"><pre><a name="27">27</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:27','27')">    <span style="color:blue">case</span> 0, <span style="color:green">% NOP</span>
</span></pre></td></tr><tr id="LN_28"><td align="right"><pre><a name="28">28</a></pre></td><td align="left"><pre><span>        <span style="color:green">% simply pass the AC</span>
</span></pre></td></tr><tr id="LN_29"><td align="right"><pre><a name="29">29</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:29','29')">    <span style="color:blue">case</span> 1, <span style="color:green">% AND</span>
</span></pre></td></tr><tr id="LN_30"><td align="right"><pre><a name="30">30</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Bitwise AND</span>
</span></pre></td></tr><tr id="LN_31"><td align="right"><pre><a name="31">31</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:31','31')">        alu_out = bitand(alu_in, AC);
</span></pre></td></tr><tr id="LN_32"><td align="right"><pre><a name="32">32</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:32','32')">    <span style="color:blue">case</span> 2, <span style="color:green">% ADD</span>
</span></pre></td></tr><tr id="LN_33"><td align="right"><pre><a name="33">33</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Add with carry and overflow appropriately set</span>
</span></pre></td></tr><tr id="LN_34"><td align="right"><pre><a name="34">34</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:34','34')">        [alu_out, carry, overflow] = sum_w_carry(AC, alu_in, carry);
</span></pre></td></tr><tr id="LN_35"><td align="right"><pre><a name="35">35</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:35','35')">    <span style="color:blue">case</span> 3, <span style="color:green">% SUB</span>
</span></pre></td></tr><tr id="LN_36"><td align="right"><pre><a name="36">36</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Subtract with borrow (set to carry) and overflow appropriately set</span>
</span></pre></td></tr><tr id="LN_37"><td align="right"><pre><a name="37">37</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:37','37')">        [alu_out, carry, overflow] = sub_w_borrow(AC, alu_in, carry);
</span></pre></td></tr><tr id="LN_38"><td align="right"><pre><a name="38">38</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:38','38')">    <span style="color:blue">case</span> 4, <span style="color:green">% CMA</span>
</span></pre></td></tr><tr id="LN_39"><td align="right"><pre><a name="39">39</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Complement AC</span>
</span></pre></td></tr><tr id="LN_40"><td align="right"><pre><a name="40">40</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:40','40')">        alu_out = fi(bitcmp(AC), 1, 8, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_41"><td align="right"><pre><a name="41">41</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:41','41')">    <span style="color:blue">case</span> 5, <span style="color:green">% CMC</span>
</span></pre></td></tr><tr id="LN_42"><td align="right"><pre><a name="42">42</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Complement Carry</span>
</span></pre></td></tr><tr id="LN_43"><td align="right"><pre><a name="43">43</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:43','43')">        carry = bitcmp(carry);
</span></pre></td></tr><tr id="LN_44"><td align="right"><pre><a name="44">44</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:44','44')">    <span style="color:blue">case</span> 6, <span style="color:green">% Get alu_in out</span>
</span></pre></td></tr><tr id="LN_45"><td align="right"><pre><a name="45">45</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Pass the input</span>
</span></pre></td></tr><tr id="LN_46"><td align="right"><pre><a name="46">46</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:46','46')">        alu_out = fi(alu_in, 1, 8, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_47"><td align="right"><pre><a name="47">47</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:47','47')">    <span style="color:blue">case</span> 7, <span style="color:green">% CLC</span>
</span></pre></td></tr><tr id="LN_48"><td align="right"><pre><a name="48">48</a></pre></td><td align="left"><pre><span>        <span style="color:green">% Clear Carry</span>
</span></pre></td></tr><tr id="LN_49"><td align="right"><pre><a name="49">49</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:49','49')">        carry = fi(0, 0, 1, 0, hdl_fm); 
</span></pre></td></tr><tr id="LN_50"><td align="right"><pre><a name="50">50</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:50','50')"><span style="color:blue">end</span>
</span></pre></td></tr><tr id="LN_51"><td align="right"><pre><a name="51">51</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_52"><td align="right"><pre><a name="52">52</a></pre></td><td align="left"><pre><span><span style="color:green">% Negativity  (N)</span>
</span></pre></td></tr><tr id="LN_53"><td align="right"><pre><a name="53">53</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:53','53')">sign_bit = getmsb(alu_out); 
</span></pre></td></tr><tr id="LN_54"><td align="right"><pre><a name="54">54</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_55"><td align="right"><pre><a name="55">55</a></pre></td><td align="left"><pre><span><span style="color:green">% Is Zero? (Z)</span>
</span></pre></td></tr><tr id="LN_56"><td align="right"><pre><a name="56">56</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:56','56')">is_zero = uint8(~all(alu_out));
</span></pre></td></tr><tr id="LN_57"><td align="right"><pre><a name="57">57</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:57','57')">zero_ufix1 = fi(is_zero, 0, 1, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_58"><td align="right"><pre><a name="58">58</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_59"><td align="right"><pre><a name="59">59</a></pre></td><td align="left"><pre><span><span style="color:green">% Set the output flag register [C N V Z]</span>
</span></pre></td></tr><tr id="LN_60"><td align="right"><pre><a name="60">60</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:60','60')">out_flags = bitconcat(bitconcat(bitconcat(carry, sign_bit), overflow), zero_ufix1);
</span></pre></td></tr><tr id="LN_61"><td align="right"><pre><a name="61">61</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_62"><td align="right"><pre><a name="62">62</a></pre></td><td align="left"><pre><span><span style="color:green">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
</span></pre></td></tr><tr id="LN_63"><td align="right"><pre><a name="63">63</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_64"><td align="right"><pre><a name="64">64</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_65"><td align="right"><pre><a name="65">65</a></pre></td><td align="left"><pre><span><span style="color:green">%% Full Subtracter with flag register appropriately set </span>
</span></pre></td></tr><tr id="LN_66"><td align="right"><pre><a name="66">66</a></pre></td><td align="left"><pre><span><span style="color:green">% diff = u1 - u2 - b_in = u1 + bitcmp(u2) + bitcmp(b_in)</span>
</span></pre></td></tr><tr id="LN_67"><td align="right"><pre><a name="67">67</a></pre></td><td align="left"><pre><span><span style="color:green">% appropriately set the borrow and the overflow</span>
</span></pre></td></tr><tr id="LN_68"><td align="right"><pre><a name="68">68</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:68','68')"><span style="color:blue">function</span> [diff, carry, overflow] = sub_w_borrow(u1, u2, b_in)
</span></pre></td></tr><tr id="LN_69"><td align="right"><pre><a name="69">69</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_70"><td align="right"><pre><a name="70">70</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:70','70')">[diff, carry, overflow] = sum_w_carry(u1, bitcmp(u2), bitcmp(b_in));
</span></pre></td></tr><tr id="LN_71"><td align="right"><pre><a name="71">71</a></pre></td><td align="left"><pre><span><span style="color:green">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
</span></pre></td></tr><tr id="LN_72"><td align="right"><pre><a name="72">72</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_73"><td align="right"><pre><a name="73">73</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_74"><td align="right"><pre><a name="74">74</a></pre></td><td align="left"><pre><span><span style="color:green">%% Full Adder with flag register appropriately set</span>
</span></pre></td></tr><tr id="LN_75"><td align="right"><pre><a name="75">75</a></pre></td><td align="left"><pre><span><span style="color:green">% sum = u1 + u2 + c_in</span>
</span></pre></td></tr><tr id="LN_76"><td align="right"><pre><a name="76">76</a></pre></td><td align="left"><pre><span><span style="color:green">% appropriately set the carry and the overflow</span>
</span></pre></td></tr><tr id="LN_77"><td align="right"><pre><a name="77">77</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:77','77')"><span style="color:blue">function</span> [sum, carry, overflow] = sum_w_carry(u1, u2, c_in)
</span></pre></td></tr><tr id="LN_78"><td align="right"><pre><a name="78">78</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_79"><td align="right"><pre><a name="79">79</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:79','79')">hdl_fm = fimath(<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_80"><td align="right"><pre><a name="80">80</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:80','80')"><span style="color:#B20000">'RoundMode'</span>, <span style="color:#B20000">'floor'</span>,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_81"><td align="right"><pre><a name="81">81</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:81','81')"><span style="color:#B20000">'OverflowMode'</span>, <span style="color:#B20000">'wrap'</span>,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_82"><td align="right"><pre><a name="82">82</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:82','82')"><span style="color:#B20000">'ProductMode'</span>, <span style="color:#B20000">'FullPrecision'</span>, <span style="color:#B20000">'ProductWordLength'</span>, 32,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_83"><td align="right"><pre><a name="83">83</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:83','83')"><span style="color:#B20000">'SumMode'</span>, <span style="color:#B20000">'FullPrecision'</span>, <span style="color:#B20000">'SumWordLength'</span>, 32,<span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_84"><td align="right"><pre><a name="84">84</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:84','84')"><span style="color:#B20000">'CastBeforeSum'</span>, true);
</span></pre></td></tr><tr id="LN_85"><td align="right"><pre><a name="85">85</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_86"><td align="right"><pre><a name="86">86</a></pre></td><td align="left"><pre><span><span style="color:green">% zero-extend u1 by 1 bit for carry detection</span>
</span></pre></td></tr><tr id="LN_87"><td align="right"><pre><a name="87">87</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:87','87')">temp_u1 = fi(bitconcat(fi(0, 0, 1, 0, hdl_fm), u1), 1, 9, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_88"><td align="right"><pre><a name="88">88</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_89"><td align="right"><pre><a name="89">89</a></pre></td><td align="left"><pre><span><span style="color:green">% zero-extend u2 by 1 bit for carry detection</span>
</span></pre></td></tr><tr id="LN_90"><td align="right"><pre><a name="90">90</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:90','90')">temp_u2 = fi(bitconcat(fi(0, 0, 1, 0, hdl_fm), u2), 1, 9, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_91"><td align="right"><pre><a name="91">91</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_92"><td align="right"><pre><a name="92">92</a></pre></td><td align="left"><pre><span><span style="color:green">% Sum is stored in 9 bits with the msb indicating carry</span>
</span></pre></td></tr><tr id="LN_93"><td align="right"><pre><a name="93">93</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:93','93')">temp_sum = fi(temp_u1 + temp_u2 + c_in, 1, 9, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_94"><td align="right"><pre><a name="94">94</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_95"><td align="right"><pre><a name="95">95</a></pre></td><td align="left"><pre><span><span style="color:green">% Carry  (C)</span>
</span></pre></td></tr><tr id="LN_96"><td align="right"><pre><a name="96">96</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:96','96')">carry = getmsb(temp_sum);
</span></pre></td></tr><tr id="LN_97"><td align="right"><pre><a name="97">97</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_98"><td align="right"><pre><a name="98">98</a></pre></td><td align="left"><pre><span><span style="color:green">% Stored back in the designated register</span>
</span></pre></td></tr><tr id="LN_99"><td align="right"><pre><a name="99">99</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:99','99')">sum = fi(temp_sum, 1, 8, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_100"><td align="right"><pre><a name="100">100</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_101"><td align="right"><pre><a name="101">101</a></pre></td><td align="left"><pre><span><span style="color:green">% Sign bit</span>
</span></pre></td></tr><tr id="LN_102"><td align="right"><pre><a name="102">102</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:102','102')">sign_bit = getmsb(sum); 
</span></pre></td></tr><tr id="LN_103"><td align="right"><pre><a name="103">103</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_104"><td align="right"><pre><a name="104">104</a></pre></td><td align="left"><pre><span><span style="color:green">% if the inputs have the same sign and the output generated has a different sign, </span>
</span></pre></td></tr><tr id="LN_105"><td align="right"><pre><a name="105">105</a></pre></td><td align="left"><pre><span><span style="color:green">% overflow is generated!</span>
</span></pre></td></tr><tr id="LN_106"><td align="right"><pre><a name="106">106</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:106','106')">overflow_int = uint8((getmsb(u1) == getmsb(u2)) <span style="color:blue">...</span>
</span></pre></td></tr><tr id="LN_107"><td align="right"><pre><a name="107">107</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:107','107')">                     &amp;&amp; (sign_bit ~= bitget(u1,8)));
</span></pre></td></tr><tr id="LN_108"><td align="right"><pre><a name="108">108</a></pre></td><td align="left"><pre><span>                 
</span></pre></td></tr><tr id="LN_109"><td align="right"><pre><a name="109">109</a></pre></td><td align="left"><pre><span><span style="color:green">% Overflow (V)</span>
</span></pre></td></tr><tr id="LN_110"><td align="right"><pre><a name="110">110</a></pre></td><td align="left"><pre><span style="cursor:pointer;" title="Click line to highlight C Code" onclick="javascript:if (top) top.emlLineOnClick(document, 'hdlcodercpu_eml:4:1:110','110')">overflow = fi(overflow_int, 0, 1, 0, hdl_fm);
</span></pre></td></tr><tr id="LN_111"><td align="right"><pre><a name="111">111</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_112"><td align="right"><pre><a name="112">112</a></pre></td><td align="left"><pre><span><span style="color:green">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
</span></pre></td></tr><tr id="LN_113"><td align="right"><pre><a name="113">113</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_114"><td align="right"><pre><a name="114">114</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_115"><td align="right"><pre><a name="115">115</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_116"><td align="right"><pre><a name="116">116</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr><tr id="LN_117"><td align="right"><pre><a name="117">117</a></pre></td><td align="left"><pre><span>
</span></pre></td></tr></table></body></html>